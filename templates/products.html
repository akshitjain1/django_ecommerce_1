{% extends 'base.html' %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Shop Products</h1>

{% if items %}
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
  {% for p in items %}
  <div class="bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden">
    <!-- Product Image -->
    <div class="h-48 bg-gray-100 flex items-center justify-center">
      <img src="{{ p.image.url }}" class="h-full object-cover" alt="{{ p.name }}" />
    </div>

    <!-- Card Content -->
    <div class="p-4 space-y-2">
      <!-- Title -->
      <h2 class="font-semibold text-lg">{{ p.name }}</h2>

      <!-- Price -->
      <p class="text-primary font-bold text-xl">â‚¹{{ p.price }}</p>

      <!-- Stock Status -->
      {% if p.quantity > 0 %}
      <span class="inline-block text-xs bg-success text-white px-2 py-1 rounded">
        In Stock ({{ p.quantity }})
      </span>
      {% else %}
      <span class="inline-block text-xs bg-error text-white px-2 py-1 rounded">
        Out of Stock
      </span>
      {% endif %}

      <!-- Actions -->
      <div class="pt-3 flex gap-3">
        <a href="{% url 'product_detail' p.id %}"
           class="flex-1 text-center border border-primary text-primary py-2 rounded hover:bg-primary hover:text-white transition">
          View Details
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="text-center py-12">
  <p class="text-textmuted text-lg">No products available at the moment.</p>
</div>
{% endif %}

<!-- PAGINATION -->
{% if items.has_other_pages %}
<div class="flex justify-center mt-10 gap-2">

    {% if items.has_previous %}
        <a href="?page={{ items.previous_page_number }}"
           class="px-4 py-2 border rounded hover:bg-gray-100">
           Prev
        </a>
    {% endif %}

    <span class="px-4 py-2">
        Page {{ items.number }} of {{ items.paginator.num_pages }}
    </span>

    {% if items.has_next %}
        <a href="?page={{ items.next_page_number }}"
           class="px-4 py-2 border rounded hover:bg-gray-100">
           Next
        </a>
    {% endif %}

</div>
{% endif %}

{% endblock %}
